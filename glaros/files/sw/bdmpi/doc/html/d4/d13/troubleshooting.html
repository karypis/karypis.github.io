<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>BDMPI - Big Data Message Passing Interface: Troubleshooting BDMPI Programs</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">BDMPI - Big Data Message Passing Interface
   &#160;<span id="projectnumber">Release 0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d4/d13/troubleshooting.html','../../');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Troubleshooting BDMPI Programs </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#tb_debug">Developing and debugging BDMPI programs</a></li>
<li class="level1"><a href="#tb_sbmalloc">Issues related to sbmalloc</a></li>
<li class="level1"><a href="#tb_cleanup">Cleaning up after a failed execution</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="tb_debug"></a>
Developing and debugging BDMPI programs</h1>
<p>BDMPI is still at early development stages and as such its implementation does not contain robust parameter checking and/or error reporting. For this reason, while developing a BDMPI program it may be easier to start with focusing on the MPI aspect of the program and relying on MPICH's robust error checking and reporting capabilities. Once you have an MPI program that runs correctly, it can then be converted to a BDMPI program by simply compiling it using <code>bdmpicc</code> or <code>bdmpic++</code> and potentially optimized using any of the additional API's provided by BDMPI.</p>
<hr/>
 <h1><a class="anchor" id="tb_sbmalloc"></a>
Issues related to sbmalloc</h1>
<p>We are aware of two cases in which sbmalloc's memory subsystem will lead to incorrect program execution.</p>
<p>The first has to do with MPI/BDMPI programs that are multi-threaded (e.g., they rely on OpenMP or Pthreads to parallelize the single node computations). In such programs, the memory that was allocated by sbmalloc and is accessed concurrently by multiple threads (e.g., within an OpenMP parallel region) needs to be pre-loaded prior to entering the parallel region. This is something that needs to be done by the application. See the API in <a class="el" href="../../d8/daa/api.html#bdmpisbmalloc">Storage-backed memory allocations</a> on how to do that and specifically the <code>BDMPI_load()</code> and <code>BDMPI_loadall()</code> functions.</p>
<p>The second has to do with the functions from the standard library that block signals. Examples of such functions are the file I/O functions, such as <code>read()/write</code>() and <code>fread()/fwrite</code>(). If these functions are used to read/write data to/from memory that has been allocated by sbmalloc, the memory needs to have the appropriate access permissions (read or write). BDMPI provides wrappers for the above four functions that perform such permission changes automatically. However, there may be other functions in the standard library that block signals for which BDMPI does not provide wrappers. If you encounter such functions do the following:</p>
<ul>
<li>Send us a note so that we can provide wrappers for them.</li>
<li>Use <code>BDMPI_load()</code> and <code>BDMPI_loadall()</code> to obtain read permissions.</li>
<li>Use <code>memset()</code> to zero-fill the associated memory to obtain write permissions.</li>
</ul>
<hr/>
 <h1><a class="anchor" id="tb_cleanup"></a>
Cleaning up after a failed execution</h1>
<p>When a BDMPI program exits unsuccessfully (either due to a program error or an issue with BDMPI itself), there may be a number of files that needs to be removed manually. These files include the following:</p>
<ul>
<li>Temporary files that BDMPI uses and are located in the working directory specified by the <code>-wdir</code> option of <code>bdmprun</code> (<a class="el" href="../../d6/d89/running.html#bdmprun">Options of bdmprun</a>).</li>
<li>POSIX message queues that are located at <code>/dev/mqueue/</code>.</li>
<li>POSIX shared memory regions that are located at <code>/dev/shm/</code>.</li>
</ul>
<p>Accessing the message queues will require to create/mount the directory. The commands for that are: </p>
<pre class="fragment">sudo mkdir /dev/mqueue
sudo mount -t mqueue none /dev/mqueue
</pre><p> Information related to that can be obtained by looking at the manpage of mq_overview (i.e., <code>"man mq_overview"</code>). </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Apr 21 2014 14:23:11 for BDMPI - Big Data Message Passing Interface by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
